// AI Platforms Directory - Real Data from StartupFA.me
class AIPlatformsDirectory {
    constructor() {
        this.platforms = [
            {
                "name": "Nectar AI",
                "description": "Create your perfect AI Companion in just seconds!",
                "category": "Highlight",
                "website": "https://nectar.ai/",
                "source": "https://startupfa.me/s/nectar",
                "type": "Companion AI",
                "integration_difficulty": "Easy",
                "revenue_potential": "High"
            },
            {
                "name": "SoraX",
                "description": "Sora2 AI Video Generator by SoraX",
                "category": "Highlight",
                "website": "https://sorax.io/",
                "source": "https://startupfa.me/s/sorax.io",
                "type": "Video Generation",
                "integration_difficulty": "Medium",
                "revenue_potential": "Very High"
            },
            {
                "name": "ImageTranslateAI",
                "description": "Translate image text instantly in 70+ languages.",
                "category": "Highlight",
                "website": "https://imagetranslate.ai/",
                "source": "https://startupfa.me/s/imagetranslateai",
                "type": "Image Processing",
                "integration_difficulty": "Easy",
                "revenue_potential": "Medium"
            },
            {
                "name": "DatingShoot",
                "description": "The #1 AI Dating Profile Picture Generator",
                "category": "Highlight",
                "website": "https://datingshoot.com/",
                "source": "https://startupfa.me/s/datingshoot",
                "type": "Image Generation",
                "integration_difficulty": "Easy",
                "revenue_potential": "High"
            },
            {
                "name": "AI Tools Collection",
                "description": "Explore AI tools for fun creation",
                "category": "Highlight",
                "website": "https://ghibliphotos.com/",
                "source": "https://startupfa.me/s/ai-tools-collection",
                "type": "Multi-tool Platform",
                "integration_difficulty": "Medium",
                "revenue_potential": "Medium"
            },
            {
                "name": "Superpowers",
                "description": "Browse the web with superpowers",
                "category": "Verified",
                "website": "https://usesuperpowers.app/",
                "source": "https://startupfa.me/s/usesuperpowers.app",
                "type": "Browser Extension",
                "integration_difficulty": "Hard",
                "revenue_potential": "Medium"
            },
            {
                "name": "Papira",
                "description": "Editor with personalized AI commands.",
                "category": "Verified",
                "website": "https://www.papira.io/",
                "source": "https://startupfa.me/s/papira",
                "type": "Text Editor",
                "integration_difficulty": "Medium",
                "revenue_potential": "Medium"
            },
            {
                "name": "Pretty Prompt",
                "description": "Grammarly for prompting.",
                "category": "Verified",
                "website": "https://www.pretty-prompt.com/",
                "source": "https://startupfa.me/s/pretty-prompt",
                "type": "Prompt Enhancement",
                "integration_difficulty": "Easy",
                "revenue_potential": "Medium"
            },
            {
                "name": "VoiceBrief.io",
                "description": "VoiceBriefIO",
                "category": "Verified",
                "website": "https://voicebrief.io/",
                "source": "https://startupfa.me/s/voicebrief.io",
                "type": "Voice AI",
                "integration_difficulty": "Medium",
                "revenue_potential": "High"
            },
            {
                "name": "Pano News",
                "description": "Read both sides, decide for yourself.",
                "category": "Verified",
                "website": "https://www.pano.news/",
                "source": "https://startupfa.me/s/pano-news",
                "type": "News AI",
                "integration_difficulty": "Medium",
                "revenue_potential": "Medium"
            },
            {
                "name": "AI Agents List",
                "description": "Find and Compare AI Agents",
                "category": "Verified",
                "website": "https://aiagentslist.com/",
                "source": "https://startupfa.me/s/ai-agents-list",
                "type": "AI Directory",
                "integration_difficulty": "Easy",
                "revenue_potential": "Low"
            },
            {
                "name": "Merlio",
                "description": "Ultimate AI Hub: Chat, Enhance Images, Code & Beyond",
                "category": "Verified",
                "website": "https://merlio.app/",
                "source": "https://startupfa.me/s/merlio",
                "type": "Multi-AI Platform",
                "integration_difficulty": "Medium",
                "revenue_potential": "High"
            },
            {
                "name": "HoverBot",
                "description": "HoverBot is an AI-powered chatbot platform",
                "category": "Verified",
                "website": "https://www.hoverbot.ai/",
                "source": "https://startupfa.me/s/hoverbot",
                "type": "Chatbot",
                "integration_difficulty": "Easy",
                "revenue_potential": "High"
            },
            {
                "name": "Mitsuko",
                "description": "AI Subtitle Translator & Audio Transcription",
                "category": "Verified",
                "website": "https://www.mitsuko.app/",
                "source": "https://startupfa.me/s/mitsuko",
                "type": "Audio Processing",
                "integration_difficulty": "Medium",
                "revenue_potential": "Medium"
            },
            {
                "name": "VisionFX",
                "description": "Create anything visually with AI",
                "category": "Verified",
                "website": "https://visionfx.ai/",
                "source": "https://startupfa.me/s/visionfx",
                "type": "Visual Creation",
                "integration_difficulty": "Medium",
                "revenue_potential": "High"
            },
            {
                "name": "Nano Banana AI",
                "description": "Free Advanced Text-to-Image Generation Model",
                "category": "Verified",
                "website": "https://nanobananaai.org/",
                "source": "https://startupfa.me/s/nano-banana-ai",
                "type": "Image Generation",
                "integration_difficulty": "Easy",
                "revenue_potential": "High"
            },
            {
                "name": "Plant App Identifier",
                "description": "Identify plants instantly with AI",
                "category": "Verified",
                "website": "https://plantappidentifier.com/",
                "source": "https://startupfa.me/s/plant-app-identifier",
                "type": "Image Recognition",
                "integration_difficulty": "Easy",
                "revenue_potential": "Medium"
            },
            {
                "name": "Modelfy 3D",
                "description": "AI Image to 3D Model Generator",
                "category": "Verified",
                "website": "https://modelfy.art/",
                "source": "https://startupfa.me/s/modelfy-3d",
                "type": "3D Generation",
                "integration_difficulty": "Hard",
                "revenue_potential": "Very High"
            },
            {
                "name": "RichlyAI Hub",
                "description": "AI for content, image, audio, video, voice, etc.",
                "category": "Verified",
                "website": "https://richlyai.com/",
                "source": "https://startupfa.me/s/richlyai-hub",
                "type": "Multi-AI Platform",
                "integration_difficulty": "Medium",
                "revenue_potential": "High"
            },
            {
                "name": "Try On Haul AI",
                "description": "AI-Powered Fashion Discovery and Virtual Try On",
                "category": "Verified",
                "website": "https://tryonhaul.ai/",
                "source": "https://startupfa.me/s/try-on-haul-ai",
                "type": "Fashion AI",
                "integration_difficulty": "Medium",
                "revenue_potential": "High"
            },
            {
                "name": "DebateAI.app",
                "description": "Watch AI Models Debate Each Other in Real-Time",
                "category": "Verified",
                "website": "https://debateai.app/",
                "source": "https://startupfa.me/s/debateaiapp",
                "type": "AI Interaction",
                "integration_difficulty": "Medium",
                "revenue_potential": "Medium"
            },
            {
                "name": "Toon Style AI",
                "description": "One photo, endless iconic cartoon styles.",
                "category": "Verified",
                "website": "https://www.toonstyleai.app/",
                "source": "https://startupfa.me/s/toon-style-ai",
                "type": "Image Transformation",
                "integration_difficulty": "Easy",
                "revenue_potential": "Medium"
            },
            {
                "name": "Memoji Generator",
                "description": "Create Cartoon Characters in Seconds",
                "category": "Verified",
                "website": "https://memojigenerator.com/",
                "source": "https://startupfa.me/s/memoji-generator",
                "type": "Avatar Generation",
                "integration_difficulty": "Easy",
                "revenue_potential": "Medium"
            },
            {
                "name": "MixHub AI",
                "description": "Powering Creativity with the Worlds Top AI Models",
                "category": "Verified",
                "website": "https://mixhubai.com/",
                "source": "https://startupfa.me/s/mixhub-ai",
                "type": "Multi-AI Platform",
                "integration_difficulty": "Medium",
                "revenue_potential": "High"
            },
            {
                "name": "Klyra AI",
                "description": "Your All-in-One AI Platform for Content Creation.",
                "category": "Verified",
                "website": "https://klyra.ai/",
                "source": "https://startupfa.me/s/klyra-ai",
                "type": "Content Creation",
                "integration_difficulty": "Easy",
                "revenue_potential": "High"
            },
            {
                "name": "OpenAI",
                "description": "Artificial intelligence at your service",
                "category": "Unclaimed",
                "website": "https://openai.com/",
                "source": "https://startupfa.me/s/openai",
                "type": "LLM Platform",
                "integration_difficulty": "Easy",
                "revenue_potential": "Very High"
            },
            {
                "name": "Claude",
                "description": "Turn your thoughts into reality",
                "category": "Unclaimed",
                "website": "https://claude.ai/",
                "source": "https://startupfa.me/s/claude",
                "type": "LLM Platform",
                "integration_difficulty": "Easy",
                "revenue_potential": "Very High"
            },
            {
                "name": "Character AI",
                "description": "Personalized AI for every moment of your day",
                "category": "Unclaimed",
                "website": "https://character.ai/",
                "source": "https://startupfa.me/s/character-ai",
                "type": "Conversational AI",
                "integration_difficulty": "Medium",
                "revenue_potential": "High"
            },
            {
                "name": "Civitai",
                "description": "Open-Source Generative AI Hub",
                "category": "Unclaimed",
                "website": "https://civitai.com/",
                "source": "https://startupfa.me/s/civitai",
                "type": "AI Model Hub",
                "integration_difficulty": "Hard",
                "revenue_potential": "Medium"
            },
            {
                "name": "Cutout.Pro",
                "description": "AI Powered Visual Design Platform",
                "category": "Unclaimed",
                "website": "https://cutout.pro/",
                "source": "https://startupfa.me/s/cutoutpro",
                "type": "Image Processing",
                "integration_difficulty": "Easy",
                "revenue_potential": "Medium"
            }
        ];

        this.currentPlatforms = [...this.platforms];
        this.displayedCount = 0;
        this.itemsPerPage = 12;
        
        this.init();
    }

    init() {
        this.renderPlatforms();
        this.setupEventListeners();
        this.startCounterAnimations();
    }

    setupEventListeners() {
        // Search functionality
        const searchInput = document.getElementById('platform-search');
        if (searchInput) {
            searchInput.addEventListener('input', debounce(() => {
                this.searchPlatforms();
            }, 300));
        }

        // Enter key search
        searchInput?.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                this.searchPlatforms();
            }
        });
    }

    searchPlatforms() {
        const query = document.getElementById('platform-search').value.toLowerCase().trim();
        
        if (!query) {
            this.currentPlatforms = [...this.platforms];
        } else {
            this.currentPlatforms = this.platforms.filter(platform => 
                platform.name.toLowerCase().includes(query) ||
                platform.description.toLowerCase().includes(query) ||
                platform.type.toLowerCase().includes(query) ||
                platform.category.toLowerCase().includes(query)
            );
        }

        this.displayedCount = 0;
        this.renderPlatforms();
        this.updateResultsCount();
    }

    clearSearch() {
        document.getElementById('platform-search').value = '';
        this.currentPlatforms = [...this.platforms];
        this.displayedCount = 0;
        this.renderPlatforms();
        this.updateResultsCount();
    }

    filterPlatforms(filter) {
        // Update active filter button
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.classList.remove('active', 'filter-active', 'bg-gradient-to-r', 'from-purple-600', 'to-blue-600', 'text-white');
            btn.classList.add('bg-gray-100', 'text-gray-700');
        });

        event.target.classList.remove('bg-gray-100', 'text-gray-700');
        event.target.classList.add('active', 'filter-active', 'bg-gradient-to-r', 'from-purple-600', 'to-blue-600', 'text-white');

        if (filter === 'all') {
            this.currentPlatforms = [...this.platforms];
        } else if (filter === 'chatbot') {
            this.currentPlatforms = this.platforms.filter(platform => 
                platform.type.toLowerCase().includes('chatbot') ||
                platform.type.toLowerCase().includes('conversational') ||
                platform.description.toLowerCase().includes('chat')
            );
        } else if (filter === 'image') {
            this.currentPlatforms = this.platforms.filter(platform => 
                platform.type.toLowerCase().includes('image') ||
                platform.type.toLowerCase().includes('visual') ||
                platform.type.toLowerCase().includes('photo')
            );
        } else if (filter === 'content') {
            this.currentPlatforms = this.platforms.filter(platform => 
                platform.type.toLowerCase().includes('content') ||
                platform.type.toLowerCase().includes('text') ||
                platform.type.toLowerCase().includes('writing')
            );
        } else {
            this.currentPlatforms = this.platforms.filter(platform => 
                platform.category === filter
            );
        }

        this.displayedCount = 0;
        this.renderPlatforms();
        this.updateResultsCount();
    }

    sortPlatforms() {
        const sortBy = document.getElementById('sort-select').value;
        
        switch (sortBy) {
            case 'name':
                this.currentPlatforms.sort((a, b) => a.name.localeCompare(b.name));
                break;
            case 'category':
                this.currentPlatforms.sort((a, b) => {
                    if (a.category === b.category) return a.name.localeCompare(b.name);
                    // Highlight first, then Verified, then Unclaimed
                    const order = { 'Highlight': 1, 'Verified': 2, 'Unclaimed': 3 };
                    return order[a.category] - order[b.category];
                });
                break;
            case 'relevance':
                this.currentPlatforms.sort((a, b) => {
                    const relevanceScore = (platform) => {
                        let score = 0;
                        if (platform.category === 'Highlight') score += 3;
                        if (platform.category === 'Verified') score += 2;
                        if (platform.revenue_potential === 'Very High') score += 3;
                        if (platform.revenue_potential === 'High') score += 2;
                        if (platform.integration_difficulty === 'Easy') score += 1;
                        return score;
                    };
                    return relevanceScore(b) - relevanceScore(a);
                });
                break;
        }

        this.displayedCount = 0;
        this.renderPlatforms();
    }

    renderPlatforms() {
        const grid = document.getElementById('platforms-grid');
        if (!grid) return;

        if (this.displayedCount === 0) {
            grid.innerHTML = '';
        }

        const platformsToShow = this.currentPlatforms.slice(
            this.displayedCount, 
            this.displayedCount + this.itemsPerPage
        );

        platformsToShow.forEach(platform => {
            const card = this.createPlatformCard(platform);
            grid.appendChild(card);
        });

        this.displayedCount += platformsToShow.length;

        // Update load more button
        const loadMoreBtn = document.getElementById('load-more');
        if (loadMoreBtn) {
            if (this.displayedCount >= this.currentPlatforms.length) {
                loadMoreBtn.style.display = 'none';
            } else {
                loadMoreBtn.style.display = 'block';
            }
        }
    }

    createPlatformCard(platform) {
        const card = document.createElement('div');
        card.className = `platform-card bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border-l-4 category-${platform.category.toLowerCase()}`;

        const categoryColor = {
            'Highlight': 'bg-green-100 text-green-800 border-green-200',
            'Verified': 'bg-blue-100 text-blue-800 border-blue-200',
            'Unclaimed': 'bg-gray-100 text-gray-800 border-gray-200'
        };

        const difficultyColor = {
            'Easy': 'text-green-600',
            'Medium': 'text-yellow-600',
            'Hard': 'text-red-600'
        };

        const potentialColor = {
            'Very High': 'text-purple-600',
            'High': 'text-blue-600',
            'Medium': 'text-green-600',
            'Low': 'text-gray-600'
        };

        card.innerHTML = `
            <div class="flex items-start justify-between mb-4">
                <div class="flex-1">
                    <h3 class="text-lg font-bold text-gray-900 mb-1">${platform.name}</h3>
                    <p class="text-sm text-gray-600 mb-2">${platform.type}</p>
                </div>
                <span class="px-3 py-1 rounded-full text-xs font-medium ${categoryColor[platform.category]}">
                    ${platform.category}
                </span>
            </div>

            <p class="text-gray-700 mb-4 text-sm leading-relaxed">${platform.description}</p>

            <div class="grid grid-cols-2 gap-3 mb-4 text-xs">
                <div class="text-center">
                    <div class="font-semibold ${difficultyColor[platform.integration_difficulty]}">${platform.integration_difficulty}</div>
                    <div class="text-gray-500">Integration</div>
                </div>
                <div class="text-center">
                    <div class="font-semibold ${potentialColor[platform.revenue_potential]}">${platform.revenue_potential}</div>
                    <div class="text-gray-500">Revenue</div>
                </div>
            </div>

            <div class="flex items-center justify-between">
                <a href="${platform.website}" target="_blank" rel="noopener noreferrer" 
                   class="inline-flex items-center text-purple-600 hover:text-purple-800 text-sm font-medium">
                    <i class="fas fa-external-link-alt mr-2"></i>
                    Visit Platform
                </a>
                <button onclick="integrateNow('${platform.name}')" 
                        class="bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:scale-105 transition-transform">
                    Integrate
                </button>
            </div>
        `;

        return card;
    }

    loadMorePlatforms() {
        this.renderPlatforms();
    }

    updateResultsCount() {
        const counter = document.getElementById('results-count');
        if (counter) {
            counter.textContent = this.currentPlatforms.length;
        }
    }

    startCounterAnimations() {
        const counters = document.querySelectorAll('.counter');
        counters.forEach(counter => {
            const target = parseInt(counter.getAttribute('data-target') || counter.textContent);
            let current = 0;
            const increment = target / 30;
            
            const updateCounter = () => {
                if (current < target) {
                    current += increment;
                    counter.textContent = Math.floor(current);
                    requestAnimationFrame(updateCounter);
                } else {
                    counter.textContent = target;
                }
            };
            
            updateCounter();
        });
    }
}

// Global functions for HTML event handlers
function searchPlatforms() {
    window.aiDirectory.searchPlatforms();
}

function clearSearch() {
    window.aiDirectory.clearSearch();
}

function filterPlatforms(filter) {
    window.aiDirectory.filterPlatforms(filter);
}

function sortPlatforms() {
    window.aiDirectory.sortPlatforms();
}

function loadMorePlatforms() {
    window.aiDirectory.loadMorePlatforms();
}

function integrateNow(platformName) {
    // Show integration modal or redirect
    alert(`Integration with ${platformName} coming soon! Contact us for early access.`);
    
    // Could redirect to integration page with platform pre-selected
    // window.location.href = `/for-ai-platforms?platform=${encodeURIComponent(platformName)}`;
}

// Utility function for search debouncing
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Initialize when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    window.aiDirectory = new AIPlatformsDirectory();
});